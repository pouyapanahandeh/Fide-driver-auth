
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>upload image from list</title>
</head>
<body>
	<div>
	<form action="/uploadFile" method="post" id="uploadPicForm" name="uploadPicForm" enctype="multipart/form-data">
	
    <input type="file" name="uploadFile" id="uploadFile" onChange="uploadPicForm.url.value=this.value" />
    <input type="text" id="url" name="url" />
    <input type="button" id="it" value="submit" style="height:29px;margin-left: -5px;" />
	<br>
	<input type="submit" value="submit" />
	</form>
	</div>
</body>
<script type="text/javascript" src="jquery-3.4.1.min.js"></script>
<script type="text/javascript">
{#    $(document).ready(function()#}
jQuery(document).ready(function($)
{
    var url = "localhost:5000";

	$("#it").click(function(){
		var form = document.getElementById("uploadPicForm");
            var formData = new FormData(form)
        $.ajax({  
            url: ctx+'/uploadPic' ,  
            type: 'POST',  
            data: formData,
            dataType: "json",	
            async: false,  
            cache: false,  
            contentType: false,  
            processData: false,  
            success: function (returndata) { 
                if(returndata.success){
                    $("#url").val(returndata.data);
                    alert('Success!');
                    return;
                }
            },  
            error: function (returndata) {  
                alert(returndata.msg); 
                //alert("上传失败");  
            }  
        }); 
    });
});



</script>
</html>
